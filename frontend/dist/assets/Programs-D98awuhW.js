import{s as D,i as K,r as $,x as O,aj as R,o as U,y as q,a as A,u as J,b as Y,d as n,e as o,f as c,g as i,h as g,j as d,k as t,m as u,n as h,t as l,P as G,_ as j,F as v,v as B,O as z,bb as H,ea as I,B as Q,p as W,J as X,Y as L,A as Z}from"./index-OSkjyhkw.js";import{_ as ee}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-DdVHL6EX.js";import{_ as se}from"./CourseCard-C76vmRuF.js";import"./UserAvatar-CL8ZQPT_.js";import"./CourseInstructors-DK5TxlK3.js";import"./ProgressBar-Bazu_17j.js";const te={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ae={key:0,class:"pt-5 px-5"},oe={class:"mb-10"},re={class:"flex items-center justify-between"},ne={class:"text-xl text-ink-gray-9 font-semibold"},le={class:"flex items-center space-x-2"},ie={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 mt-5"},me={class:"relative group"},ue={key:0,class:"absolute inset-0 bg-black-overlay-500 opacity-60 rounded-md"},ce={key:1,class:"absolute inset-0 flex items-center justify-center"},de={key:1,class:"text-sm italic text-ink-gray-5 mt-4"},_e={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},pe={class:"text-xl font-medium"},fe={class:"leading-5"},we={__name:"Programs",setup(ge){const{brand:S}=D(),m=K("$user"),b=$(!1),p=O(),k=$(""),F=R();U(()=>{var e,s;!F.learningPaths.data&&!((e=m.data)!=null&&e.is_moderator)&&!((s=m.data)!=null&&s.is_instructor)&&p.push({name:"Courses"})});const y=q({url:"lms.lms.utils.get_programs",auto:!0,cache:"programs"}),M=e=>{L("frappe.client.insert",{doc:{doctype:"LMS Program",title:k.value}}).then(s=>{p.push({name:"ProgramForm",params:{programName:s.name}})})},T=(e,s)=>{L("lms.lms.utils.enroll_in_program_course",{program:e,course:s}).then(r=>{r.current_lesson?p.push({name:"Lesson",params:{courseName:s,chapterNumber:r.current_lesson.split("-")[0],lessonNumber:r.current_lesson.split("-")[1]}}):r&&p.push({name:"Lesson",params:{courseName:s,chapterNumber:1,lessonNumber:1}})}).catch(r=>{var _;Z("Error",((_=r.messages)==null?void 0:_[0])||r,"x")})},x=e=>{var s,r;return!((s=m.data)!=null&&s.is_moderator||(r=m.data)!=null&&r.is_instructor||e.membership||e.eligible)},E=A(()=>[{label:"Programs"}]);return J(()=>({title:__("Programs"),icon:S.favicon})),(e,s)=>{var _,N,w;const r=Y("router-link");return o(),n(v,null,[c("header",te,[i(t(ee),{items:E.value},null,8,["items"]),(_=t(m).data)!=null&&_.is_moderator||(N=t(m).data)!=null&&N.is_instructor?(o(),g(t(j),{key:0,onClick:s[0]||(s[0]=a=>b.value=!0),variant:"solid"},{prefix:u(()=>[i(t(G),{class:"h-4 w-4 stroke-1.5"})]),default:u(()=>[h(" "+l(e.__("New")),1)]),_:1})):d("",!0)]),(w=t(y).data)!=null&&w.length?(o(),n("div",ae,[(o(!0),n(v,null,B(t(y).data,a=>{var P,C,V;return o(),n("div",oe,[c("div",re,[c("div",ne,l(a.name),1),c("div",le,[a.members?(o(),g(t(z),{key:0,variant:"subtle",theme:"green",size:"lg"},{default:u(()=>[h(l(a.members)+" "+l(a.members==1?e.__("member"):e.__("members")),1)]),_:2},1024)):d("",!0),a.progress?(o(),g(t(z),{key:1,variant:"subtle",theme:"blue",size:"lg"},{default:u(()=>[h(l(a.progress)+l(e.__("% completed")),1)]),_:2},1024)):d("",!0),(P=t(m).data)!=null&&P.is_moderator||(C=t(m).data)!=null&&C.is_instructor?(o(),g(r,{key:2,to:{name:"ProgramForm",params:{programName:a.name}}},{default:u(()=>[i(t(j),null,{prefix:u(()=>[i(t(H),{class:"h-4 w-4 stroke-1.5"})]),default:u(()=>[h(" "+l(e.__("Edit")),1)]),_:1})]),_:2},1032,["to"])):d("",!0)])]),(V=a.courses)!=null&&V.length?(o(),n("div",ie,[(o(!0),n(v,null,B(a.courses,f=>(o(),n("div",me,[i(se,{course:f,onClick:he=>T(a.name,f.name),class:"cursor-pointer"},null,8,["course","onClick"]),x(f)?(o(),n("div",ue)):d("",!0),x(f)?(o(),n("div",ce,[i(t(I),{class:"size-10 text-ink-white"})])):d("",!0)]))),256))])):(o(),n("div",de,l(e.__("No courses in this program")),1))])}),256))])):(o(),n("div",_e,[i(t(Q),{class:"size-10 mx-auto stroke-1 text-ink-gray-4"}),c("div",pe,l(e.__("No programs found")),1),c("div",fe,l(e.__("There are no programs available at the moment. Keep an eye out, fresh learning experiences are on the way soon!")),1)])),i(t(X),{modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=a=>b.value=a),options:{title:e.__("New Program"),actions:[{label:e.__("Create"),variant:"solid",onClick:()=>M(e.close)}]}},{"body-content":u(()=>[i(t(W),{label:e.__("Title"),modelValue:k.value,"onUpdate:modelValue":s[1]||(s[1]=a=>k.value=a)},null,8,["label","modelValue"])]),_:1},8,["modelValue","options"])],64)}}};export{we as default};
