import{i as $,x as B,s as z,y as d,H as L,o as M,a as p,u as R,d as y,e as c,f as l,g as n,k as t,m as _,n as u,t as i,_ as v,p as r,aw as A,h as I,b1 as H,b2 as W,b3 as X,b4 as G,A as k}from"./index-OSkjyhkw.js";import{_ as K}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-DdVHL6EX.js";const Q={class:""},Y={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},Z={class:"py-5"},ee={class:"container border-b mb-4 pb-4"},ae={class:"text-lg font-semibold mb-4"},oe={class:"grid grid-cols-2 gap-4"},le={class:"mt-4"},se={class:"block text-ink-gray-5 text-xs mb-1"},te={class:"container mb-4 pb-4"},ne={class:"text-lg font-semibold mb-4"},ie={class:"grid grid-cols-2 gap-4"},re={class:"block text-ink-gray-5 text-xs mb-1 mt-4"},me={class:"mb-4"},de={key:1,class:""},ue={class:"flex items-center"},be={class:"border rounded-md p-2 mr-2"},pe={class:"flex flex-col"},ce={class:"text-sm text-ink-gray-4 mt-1"},fe={__name:"JobCreation",props:{jobName:{type:String,default:"new"}},setup(w){const V=$("$user"),g=B(),{brand:j}=z(),m=w,x=d({url:"frappe.client.insert",makeParams(e){var a;return{doc:{doctype:"Job Opportunity",company_logo:(a=o.image)==null?void 0:a.file_url,...o}}}}),C=d({url:"frappe.client.set_value",makeParams(e){return{doctype:"Job Opportunity",name:m.jobName,fieldname:{company_logo:o.image.file_url,...o}}}}),b=d({url:"frappe.client.get",makeParams(e){return{doctype:"Job Opportunity",name:m.jobName}},onSuccess(e){Object.keys(e).forEach(a=>{Object.hasOwn(o,a)&&(o[a]=e[a])}),e.company_logo&&J.reload({image:e.company_logo})}}),J=d({url:"lms.lms.api.get_file_info",makeParams(e){return{file_url:e.image}},auto:!1,onSuccess(e){o.image=e}}),o=L({job_title:"",location:"",type:"Full Time",status:"Open",company_name:"",company_website:"",image:null,description:"",company_email_address:""});M(()=>{V.data||(window.location.href="/login"),m.jobName!="new"&&b.reload()});const N=()=>{b.data?S():T()},T=()=>{x.submit({},{onSuccess(e){g.push({name:"JobDetail",params:{job:e.name}})},onError(e){var a;k("Error",((a=e.messages)==null?void 0:a[0])||e,"x")}})},S=()=>{C.submit({},{onSuccess(e){g.push({name:"JobDetail",params:{job:e.name}})},onError(e){var a;k("Error",((a=e.messages)==null?void 0:a[0])||e,"x")}})},F=e=>{o.image=e},O=()=>{o.image=null},U=e=>{let a=e.name.split(".").pop().toLowerCase();if(!["jpg","jpeg","png"].includes(a))return"Only image file is allowed."},E=p(()=>[{label:"Full Time",value:"Full Time"},{label:"Part Time",value:"Part Time"},{label:"Contract",value:"Contract"},{label:"Freelance",value:"Freelance"}]),D=p(()=>[{label:"Open",value:"Open"},{label:"Closed",value:"Closed"}]),h=p(()=>[{label:"Jobs",route:{name:"Jobs"}},{label:m.jobName=="new"?"New Job":"Edit Job",route:{name:"JobCreation"}}]);return R(()=>{var e;return{title:m.jobName=="new"?"New Job":(e=b.data)==null?void 0:e.title,icon:j.favicon}}),(e,a)=>(c(),y("div",Q,[l("header",Y,[n(t(K),{items:h.value},null,8,["items"]),n(t(v),{variant:"solid",onClick:a[0]||(a[0]=s=>N())},{default:_(()=>[u(i(e.__("Save")),1)]),_:1})]),l("div",Z,[l("div",ee,[l("div",ae,i(e.__("Job Details")),1),l("div",oe,[l("div",null,[n(t(r),{modelValue:o.job_title,"onUpdate:modelValue":a[1]||(a[1]=s=>o.job_title=s),label:e.__("Title"),class:"mb-4",required:!0},null,8,["modelValue","label"]),n(t(r),{modelValue:o.location,"onUpdate:modelValue":a[2]||(a[2]=s=>o.location=s),label:e.__("Location"),required:!0},null,8,["modelValue","label"])]),l("div",null,[n(t(r),{modelValue:o.type,"onUpdate:modelValue":a[3]||(a[3]=s=>o.type=s),label:e.__("Type"),type:"select",options:E.value,class:"mb-4",required:!0},null,8,["modelValue","label","options"]),n(t(r),{modelValue:o.status,"onUpdate:modelValue":a[4]||(a[4]=s=>o.status=s),label:e.__("Status"),type:"select",options:D.value,required:!0},null,8,["modelValue","label","options"])])]),l("div",le,[l("label",se,[u(i(e.__("Description"))+" ",1),a[11]||(a[11]=l("span",{class:"text-ink-red-3"},"*",-1))]),n(t(A),{content:o.description,onChange:a[5]||(a[5]=s=>o.description=s),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem] mb-4"},null,8,["content"])])]),l("div",te,[l("div",ne,i(e.__("Company Details")),1),l("div",ie,[l("div",null,[n(t(r),{modelValue:o.company_name,"onUpdate:modelValue":a[6]||(a[6]=s=>o.company_name=s),label:e.__("Company Name"),class:"mb-4",required:!0},null,8,["modelValue","label"]),n(t(r),{modelValue:o.company_website,"onUpdate:modelValue":a[7]||(a[7]=s=>o.company_website=s),label:e.__("Company Website"),required:!0},null,8,["modelValue","label"])]),l("div",null,[n(t(r),{modelValue:o.company_email_address,"onUpdate:modelValue":a[8]||(a[8]=s=>o.company_email_address=s),label:e.__("Company Email Address"),class:"mb-4",required:!0},null,8,["modelValue","label"]),l("label",re,[u(i(e.__("Company Logo"))+" ",1),a[12]||(a[12]=l("span",{class:"text-ink-red-3"},"*",-1))]),o.image?(c(),y("div",de,[l("div",ue,[l("div",be,[n(t(W),{class:"h-5 w-5 stroke-1.5 text-ink-gray-7"})]),l("div",pe,[l("span",null,i(o.image.file_name),1),l("span",ce,i(t(X)(o.image.file_size)),1)]),n(t(G),{onClick:a[10]||(a[10]=s=>O()),class:"bg-surface-gray-3 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(c(),I(t(H),{key:0,fileTypes:["image/*"],validateFile:U,onSuccess:a[9]||(a[9]=s=>F(s))},{default:_(({file:s,progress:q,uploading:f,openFileSelector:P})=>[l("div",me,[n(t(v),{onClick:P,loading:f},{default:_(()=>[u(i(f?`Uploading ${q}%`:"Upload an image"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))])])])])]))}};export{fe as default};
