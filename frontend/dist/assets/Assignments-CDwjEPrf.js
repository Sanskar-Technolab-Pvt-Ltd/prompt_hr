import{i as v,r as h,s as C,x as R,o as j,w as P,c as B,a as c,u as D,b as I,d as y,e as p,f as i,g as a,k as s,m as _,_ as w,n as k,t as f,P as L,h as M,j as S,p as b,bI as q,F as U}from"./index-OSkjyhkw.js";import{_ as z}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-DdVHL6EX.js";import{f as E}from"./ListView-yKC6cFSr.js";const Y={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},G={class:"md:w-3/4 md:mx-auto py-5 mx-5"},H={class:"grid grid-cols-3 gap-5 mb-5"},J={key:1,class:"text-center p-5 text-ink-gray-5 mt-52 w-3/4 md:w-1/2 mx-auto space-y-2"},K={class:"text-xl font-medium"},O={class:"leading-5"},Q={key:2,class:"flex justify-center my-5"},te={__name:"Assignments",setup(W){const u=v("$user"),x=v("$dayjs"),n=h(""),o=h(""),{brand:V}=C(),m=R();j(()=>{var t,e;!((t=u.data)!=null&&t.is_moderator)&&!((e=u.data)!=null&&e.is_instructor)&&m.push({name:"Courses"}),n.value=m.currentRoute.value.query.title,o.value=m.currentRoute.value.query.type}),P([n,o],()=>{m.push({query:{title:n.value,type:o.value}}),N()});const N=()=>{l.update({filters:A.value}),l.reload()},A=c(()=>{var e,d;let t={};return n.value&&(t.title=["like",`%${n.value}%`]),o.value&&(t.type=o.value),(e=u.data)!=null&&e.is_moderator||(t.owner=(d=u.data)==null?void 0:d.email),t}),l=B({doctype:"LMS Assignment",fields:["name","title","type","creation"],orderBy:"modified desc",cache:["assignments"],transform(t){return t.map(e=>({...e,creation:x(e.creation).fromNow()}))}}),F=c(()=>[{label:__("Title"),key:"title",width:2},{label:__("Type"),key:"type",width:1,align:"left"},{label:__("Created"),key:"creation",width:1,align:"center"}]),T=c(()=>["","Document","Image","PDF","URL","Text"].map(e=>({label:__(e),value:e}))),$=c(()=>[{label:"Assignments",route:{name:"Assignments"}}]);return D(()=>({title:__("Assignments"),icon:V.favicon})),(t,e)=>{var g;const d=I("router-link");return p(),y(U,null,[i("header",Y,[a(s(z),{items:$.value},null,8,["items"]),a(d,{to:{name:"AssignmentForm",params:{assignmentID:"new"}}},{default:_(()=>[a(s(w),{variant:"solid"},{prefix:_(()=>[a(s(L),{class:"w-4 h-4"})]),default:_(()=>[k(" "+f(t.__("New")),1)]),_:1})]),_:1})]),i("div",G,[i("div",H,[a(s(b),{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=r=>n.value=r),placeholder:t.__("Search by title")},null,8,["modelValue","placeholder"]),a(s(b),{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value=r),type:"select",options:T.value,placeholder:t.__("Type")},null,8,["modelValue","options","placeholder"])]),(g=s(l).data)!=null&&g.length?(p(),M(s(E),{key:0,columns:F.value,rows:s(l).data,"row-key":"name",options:{showTooltip:!1,selectable:!1,getRowRoute:r=>({name:"AssignmentForm",params:{assignmentID:r.name}})}},null,8,["columns","rows","options"])):(p(),y("div",J,[a(s(q),{class:"size-10 mx-auto stroke-1 text-ink-gray-4"}),i("div",K,f(t.__("No assignments found")),1),i("div",O,f(t.__('You have not created any assignments yet. To create a new assignment, click on the "New" button above.')),1)])),s(l).data&&s(l).hasNextPage?(p(),y("div",Q,[a(s(w),{onClick:e[2]||(e[2]=r=>s(l).next())},{default:_(()=>[k(f(t.__("Load More")),1)]),_:1})])):S("",!0)])],64)}}};export{te as default};
