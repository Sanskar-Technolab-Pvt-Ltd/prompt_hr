import{x as L,i as B,y as N,a as y,b as M,d as l,j as c,e as r,f as e,g as i,h as v,n as C,t as o,k as t,a4 as z,B as T,a1 as j,a2 as x,a3 as H,m as b,_ as p,A as O,s as E,u as F,L as P,F as D,v as S}from"./index-OSkjyhkw.js";import{_ as R}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-DdVHL6EX.js";import{_ as I}from"./CourseCard-C76vmRuF.js";import{_ as V}from"./DateRange-CgTlKDFZ.js";import{_ as q}from"./CourseInstructors-DK5TxlK3.js";import{_ as A}from"./UserAvatar-CL8ZQPT_.js";import"./ProgressBar-Bazu_17j.js";const G={key:0,class:"border-2 rounded-md p-5 lg:w-72"},Y={key:0,class:"text-xs bg-green-100 text-green-700 float-right px-2 py-0.5 rounded-md"},J={key:0},K={key:1},Q={key:1,class:"text-xs bg-red-100 text-red-700 float-right px-2 py-0.5 rounded-md"},U={key:2,class:"text-lg font-semibold mb-3 text-ink-gray-9"},W={class:"flex items-center mb-3 text-ink-gray-7"},X={class:"flex items-center mb-3 text-ink-gray-7"},Z={key:3,class:"flex items-center text-ink-gray-7"},tt={__name:"BatchOverlay",props:{batch:{type:Object,default:null}},setup(s){const w=L(),k=B("$user");B("$dayjs");const u=s,a=N({url:"lms.lms.utils.enroll_in_batch",makeParams(n){return{batch:u.batch.data.name}}}),$=()=>{k.data||(window.location.href=`/login?redirect-to=/batches/details/${u.batch.data.name}`),a.submit({},{onSuccess(n){O(__("Success"),__("You have been enrolled in this batch"),"check"),w.push({name:"Batch",params:{batchName:u.batch.data.name}})}})},f=y(()=>{var n,h,m,_;return(n=u.batch.data)!=null&&n.seat_count?((h=u.batch.data)==null?void 0:h.seat_count)-((_=(m=u.batch.data)==null?void 0:m.students)==null?void 0:_.length):null}),d=y(()=>{var n,h,m;return(m=(n=u.batch.data)==null?void 0:n.students)==null?void 0:m.includes((h=k.data)==null?void 0:h.name)}),g=y(()=>{var n;return(n=k.data)==null?void 0:n.is_moderator});return(n,h)=>{const m=M("router-link");return s.batch.data?(r(),l("div",G,[s.batch.data.seat_count&&f.value>0?(r(),l("div",Y,[C(o(f.value)+" ",1),f.value>1?(r(),l("span",J,o(n.__("Seats Left")),1)):f.value==1?(r(),l("span",K,o(n.__("Seat Left")),1)):c("",!0)])):s.batch.data.seat_count&&f.value<=0?(r(),l("div",Q,o(n.__("Sold Out")),1)):c("",!0),s.batch.data.amount?(r(),l("div",U,o(t(z)(s.batch.data.amount,s.batch.data.currency)),1)):c("",!0),e("div",W,[i(t(T),{class:"h-4 w-4 stroke-1.5 mr-2"}),e("span",null,o(s.batch.data.courses.length)+" "+o(n.__("Courses")),1)]),i(V,{startDate:s.batch.data.start_date,endDate:s.batch.data.end_date,class:"mb-3"},null,8,["startDate","endDate"]),e("div",X,[i(t(j),{class:"h-4 w-4 stroke-1.5 mr-2"}),e("span",null,o(t(x)(s.batch.data.start_time))+" - "+o(t(x)(s.batch.data.end_time)),1)]),s.batch.data.timezone?(r(),l("div",Z,[i(t(H),{class:"h-4 w-4 stroke-1.5 mr-2"}),e("span",null,o(s.batch.data.timezone),1)])):c("",!0),g.value||d.value?(r(),v(m,{key:4,to:{name:"Batch",params:{batchName:s.batch.data.name}}},{default:b(()=>[i(t(p),{variant:"solid",class:"w-full mt-4"},{default:b(()=>[e("span",null,o(g.value?n.__("Manage Batch"):n.__("Visit Batch")),1)]),_:1})]),_:1},8,["to"])):s.batch.data.paid_batch&&s.batch.data.seats_left>0&&s.batch.data.accept_enrollments?(r(),v(m,{key:5,to:{name:"Billing",params:{type:"batch",name:s.batch.data.name}}},{default:b(()=>[d.value?c("",!0):(r(),v(t(p),{key:0,class:"w-full mt-4",variant:"solid"},{default:b(()=>[e("span",null,o(n.__("Register Now")),1)]),_:1}))]),_:1},8,["to"])):s.batch.data.allow_self_enrollment&&s.batch.data.seats_left&&s.batch.data.accept_enrollments?(r(),v(t(p),{key:6,variant:"solid",class:"w-full mt-2",onClick:h[0]||(h[0]=_=>$())},{default:b(()=>[C(o(n.__("Enroll Now")),1)]),_:1})):c("",!0),g.value?(r(),v(m,{key:7,to:{name:"BatchForm",params:{batchName:s.batch.data.name}}},{default:b(()=>[i(t(p),{class:"w-full mt-2"},{default:b(()=>[e("span",null,o(n.__("Edit")),1)]),_:1})]),_:1},8,["to"])):c("",!0)])):c("",!0)}}},at={key:0,class:""},et={class:"sticky top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},st={class:"m-5 pb-10"},nt={class:"text-3xl font-semibold text-ink-gray-9"},rt={class:"my-3 leading-6 text-ink-gray-7"},ot={class:"flex flex-col gap-2 lg:gap-0 lg:flex-row lg:items-center justify-between lg:w-1/2"},lt={class:"flex items-center text-ink-gray-7"},ct={key:0,class:"hidden lg:block"},dt={key:1,class:"hidden lg:block"},it={class:"flex items-center text-ink-gray-7"},ut={class:"flex avatar-group overlap mt-3"},mt={class:"grid lg:grid-cols-[60%,20%] gap-4 lg:gap-20 mt-10"},ht={class:"order-2 lg:order-none"},_t=["innerHTML"],bt={class:"order-1 lg:order-none"},ft={key:0},gt={class:"flex items-center mt-10"},vt={class:"text-2xl font-semibold"},kt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-5"},pt={key:0},yt=["innerHTML"],St={__name:"BatchDetail",props:{batchName:{type:String,required:!0}},setup(s){B("$user");const w=L(),{brand:k}=E(),u=s,a=N({url:"lms.lms.utils.get_batch_details",cache:["batch",u.batchName],params:{batch:u.batchName},auto:!0,onSuccess:d=>{d||w.push({name:"Batches"})}}),$=N({url:"lms.lms.utils.get_batch_courses",params:{batch:u.batchName},cache:["batchCourses",u.batchName],auto:!0}),f=y(()=>{var g,n;let d=[{label:"Batches",route:{name:"Batches"}}];return d.push({label:(g=a==null?void 0:a.data)==null?void 0:g.title,route:{name:"BatchDetail",params:{batchName:(n=a==null?void 0:a.data)==null?void 0:n.name}}}),d});return F(()=>{var d;return{title:(d=a==null?void 0:a.data)==null?void 0:d.title,icon:k.favicon}}),(d,g)=>{var h,m;const n=M("router-link");return t(a).data?(r(),l("div",at,[e("header",et,[i(t(R),{items:f.value},null,8,["items"])]),e("div",st,[e("div",null,[e("div",nt,o(t(a).data.title),1),e("div",rt,o(t(a).data.description),1),e("div",ot,[e("div",lt,[i(t(T),{class:"h-4 w-4 mr-2"}),e("span",null,o((m=(h=t(a).data)==null?void 0:h.courses)==null?void 0:m.length)+" "+o(d.__("Courses")),1)]),t(a).data.courses?(r(),l("span",ct,"·")):c("",!0),i(V,{startDate:t(a).data.start_date,endDate:t(a).data.end_date},null,8,["startDate","endDate"]),t(a).data.start_date?(r(),l("span",dt,"·")):c("",!0),e("div",it,[i(t(j),{class:"h-4 w-4 mr-2"}),e("span",null,o(t(x)(t(a).data.start_time))+" - "+o(t(x)(t(a).data.end_time)),1)])]),e("div",ut,[e("div",{class:P(["h-6 mr-1",{"avatar-group overlap":t(a).data.instructors.length>1}])},[(r(!0),l(D,null,S(t(a).data.instructors,_=>(r(),v(A,{user:_},null,8,["user"]))),256))],2),i(q,{instructors:t(a).data.instructors},null,8,["instructors"])])]),e("div",mt,[e("div",ht,[e("div",{class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal mt-6",innerHTML:t(a).data.batch_details},null,8,_t)]),e("div",bt,[i(tt,{batch:t(a)},null,8,["batch"])])]),t(a).data.courses.length?(r(),l("div",ft,[e("div",gt,[e("div",vt,o(d.__("Courses")),1)]),e("div",kt,[t(a).data.courses?(r(!0),l(D,{key:0},S(t($).data,_=>(r(),l("div",{key:_.course},[i(n,{to:{name:"CourseDetail",params:{courseName:_.name}}},{default:b(()=>[(r(),v(I,{course:_,key:_.name},null,8,["course"]))]),_:2},1032,["to"])]))),128)):c("",!0)]),t(a).data.batch_details_raw?(r(),l("div",pt,[e("div",{innerHTML:t(a).data.batch_details_raw,class:"batch-description"},null,8,yt)])):c("",!0)])):c("",!0)])])):c("",!0)}}};export{St as default};
