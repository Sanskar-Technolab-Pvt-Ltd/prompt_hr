{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-05-13 11:13:11.669145",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Employee Transfer",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{% macro format_ordinal_date(d) -%}\n    {%- if d %}\n        {% set d = frappe.utils.getdate(d) %}\n        {%- set day = d.day %}\n        {%- set month = frappe.utils.formatdate(d, \"MMM\") %}\n        {%- set year = d.year %}\n        {{ day }}\n        {%- if day in [1, 21, 31] -%}<sup>st</sup>\n        {%- elif day in [2, 22] -%}<sup>nd</sup>\n        {%- elif day in [3, 23] -%}<sup>rd</sup>\n        {%- else -%}<sup>th</sup>\n        {%- endif -%}\n        -{{ month }}-{{ year }}\n    {%- endif %}\n{%- endmacro %}\n\n{# Get employee object #}\n{% set employee = frappe.get_doc(\"Employee\", doc.employee) %}\n{% if employee.custom_work_location %}\n    {% set current_location = frappe.get_doc(\"Address\", employee.custom_work_location).address_title %}\n{% else %}\n    {% set current_location = \"Ahmedabad\" %}\n{% endif %}\n\n{# Get latest property history record for this transfer #}\n{% set property_history = frappe.get_all(\"Employee Property History\", filters={\"parent\": doc.name}, fields=[\"current\", \"new\", \"fieldname\"], order_by=\"creation desc\") %}\n\n{# Initialize default values from employee #}\n{% set ns = namespace(current_location=current_location,new_designation = employee.designation, new_manager = frappe.get_doc(\"Employee\",employee.reports_to),new_location = current_location) %}\n\n{# Override from property history if any #}\n{% for change in property_history %}\n    {% if change.fieldname == \"designation\" %}\n        {% set ns.new_designation = change.new %}\n    {% elif change.fieldname == \"reports_to\" %}\n        {% set ns.new_manager = frappe.get_doc(\"Employee\",change.new) %}\n    {% elif change.fieldname == \"custom_work_location\" %}\n        {% set ns.new_location = frappe.get_doc(\"Address\", change.new).address_title %}\n        {% if change.current %}\n        {% set ns.current_location = frappe.get_doc(\"Address\",change.current).address_title %}\n        {% endif %}\n    {% endif %}\n{% endfor %}\n\n<p style=\"text-align:right;\">Date: {{ format_ordinal_date(frappe.utils.nowdate()) }}</p>\n\n<p>{{ doc.name }}</p>\n<p>Employee Name: {{ employee.employee_name }}</p>\n<p>Employee ID: {{ employee.employee_number }}</p>\n<p>Designation: {{ employee.designation }}</p>\n<p>Department: {{ employee.department }}</p>\n\n<h3 style=\"text-align: center;\"><u>Transfer Letter</u></h3>\n\n<p><b>Dear {{ employee.salutation or \"Mr./Ms\" }} {{ employee.employee_name }},</b></p><br>\n\n<p>\n    We are pleased to inform you that with effect from {{ format_ordinal_date(doc.transfer_date) }}, \n    you are being transferred from your current location <b>{{ ns.current_location }} </b>\n    to <b>{{ns.new_location}}</b> as a / an {{ ns.new_designation }} with All.\n</p>\n\n<p>You shall be reporting to {{ns.new_manager.salutation or \"Mr. / Ms.\"}} {{ ns.new_manager.employee_name }}.</p><br>\n\n<p>Your compensation package will remain the same as per the latest updation in your appointment or appraisal letter\nissued by HR. All other terms and conditions of employment will remain unchanged as per your original Letter of\nAppointment. If there is any change in your role and responsibility, it will be intimated by your reporting manager & HR\nthrough written communication.</p><br>\n\n<p>\n    I believe this to be an excellent opportunity for you to continue your valuable contribution to the company and remain\n    as a part of the Company\u2019s exciting future.\n</p>\n\n<p>Please indicate your acceptance by signing the duplicate copy of the Transfer Letter and return to us.</p>\n{% set ns = namespace(hr_manager = \"\") %}\n{% if doc.company %}\n    {% set users = frappe.get_all(\"Employee\", filters={\"user_id\": [\"!=\", \"\"], \"company\": doc.company, \"status\": \"Active\"}, fields=[\"user_id\", \"employee_name\"]) %}\n    {% for user in users %}\n        {% set roles = frappe.get_all(\"Has Role\",filters={\"role\":\"HR Manager\",\"parent\":user.user_id}) %}\n        {% if roles %}\n            {% set ns.hr_manager = user.employee_name %}\n        {% endif %}\n    {% endfor %}\n{% endif %}\n<br>\n<table style=\"width: 100%;\">\n    <colgroup>\n        <col style=\"width: 50%;\">\n        <col style=\"width: 50%;\">\n    </colgroup>\n    <tr>\n        <td style=\"padding-left:0px !important\"><b>With best wishes ,</b></td>\n        <td><b>Acceptance :</b></td>\n    </tr>\n    <tr>\n        <td rowspan=\"2\">\n            <p>\n                {% set signatory_doc = frappe.get_all(\"Signature Directory\", filters={\"company\": doc.company}, fields=[\"name\"]) %}\n                {% if signatory_doc %}\n                    {% set signature_details = frappe.get_all(\"Signature Details\", filters={\"parent\": signatory_doc[0].name, \"role\": \"HR Manager\"}, fields=[\"name\", \"upload_signature\"]) %}\n                    {% if signature_details and signature_details[0].upload_signature %}\n                        <img src=\"{{ frappe.utils.get_url(signature_details[0].upload_signature) }}\"\n                             alt=\"HR Manager Signature\"\n                             style=\"width: 30%; height: auto;\">\n                    {% else %}\n            <br>\n            <br>\n                    {% endif %}\n                    {% else %}\n            <br>\n            <br>\n                {% endif %}\n            </p>\n        </td>\n        <td>Name :</td>\n    </tr>\n    <tr>\n        <td>Sign :</td>\n    </tr>\n</table>\n\n<p>Authorized Signatories Sign</p>\n<p>{{ns.hr_manager}}</p>\n<p>HR Manager</p>\n<br>\n<p>Please sign and return the duplicate copy in token as a receipt of letter for HR records.</p>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-06-06 14:15:59.656599",
 "modified_by": "Administrator",
 "module": "Prompt HR",
 "name": "Transfer letter - Indifoss",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}